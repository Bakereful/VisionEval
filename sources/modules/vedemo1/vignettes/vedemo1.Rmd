---
title: "Using the vedemo1 Package"
author: "Brian Gregor"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Using the vedemo1 Package}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

The **vedemo1** package contains several demonstration modules for the VisionEval framework. These modules were developed to work with minimally specified geography. In other words, only Azones and Mareas are specified. The modules create a simulated set of households, simulated Bzones, and simulated Bzone development characteristics. The package demonstrates several aspects of module development including several ways of parameter estimation, data specifications, and module functions. The models in this package include:  

- **CreateHouseholds**: This demonstration module creates simulated households for a model where geography is minimally specified, i.e. where only Azones and Mareas are specified. Simulated households are created using a household size distribution for the model area and Azone populations. The module creates a dataset of household sizes. A *Households* table is initialized and populated with the household size dataset. Azone locations and household IDs are also added to the Household table.
The *CreateHouseholds* vignette describes this model and how region-specific inputs can be used to create a model which represents the region.

- **CreateBzones**: This demonstration module creates simulated Bzones that have a specified numbers of households and development types (Metropolitan, Town, Rural). Module determines the number of Bzones in each Azone and assigns a unique ID and a development type to each. It also calculates the number of households in each Bzone such that the proportion of households in each Azone assigned to each development type matches assumed input proportions. It also assigns the respective Mareas to the simulated Bzones. A Bzone table is created and populated with unique IDs, development types, Mareas, Azones, and numbers of households. The *CreateBzones* vignette describes this model and what to do to use it.

- **CreateBzoneDev**: This module simulates development characteristics for each Bzone. These characteristics include the population density (persons per square mile), the number of single-family detached dwelling units, and the number of multifamily dwelling units. In addition, for Bzones that are designated as 'Metropolitan' it assigns a distance to the urban core. The *CreateBzoneDev* vignette describes this model and what to do to use it.

Each module is defined by an R script with the name of the module. The scripts are organized in 3 sections. In the first section, model parameters are specified. The modules show 3 different examples of how modules may be specified. The *CreateBzones.R* script shows the simplest approach of directly assigning the parameters. The *CreateBzoneDev.R* script shows parameters may be loaded from files located in the *inst/extdata* directory. The *CreateHouseholds.R* script show how parameters may be calculated by a function that uses data loaded from files located in the *inst/extdata* directory. The parameter input data in the *inst/extdata* directory may be modified to better reflect characteristics of the region and/or base year for the model that is being build. Each of the parameter files has a corresponding text file which provides data specifications. To modify the parameter files, the user will have to work with the source version of this package. They will have to gather certain information about their region, place it in properly formatted files, and save it in the *inst/extdata* directory. The vignette for each module describes must be done in detail. After everything has been done to prepare the data needed to estimate parameters for the region, the modified source package must be built as a binary package. The best way to do this is using the RStudio IDE for R development along with the *devtools* package. RStudio is free and it along with *devtools* has everything you need to easily create a binary package from a source package. The `devtools::build(binary = TRUE)` will take care of things. For more information about R packages, I recommend referring to Hadley Wickham's book, *R Packages*, and/or to his [website](http://r-pkgs.had.co.nz/).

The second section of the script defines the module data specifications including what level of geography the module will be run at, input data, data that will be read from the datastore, and data that will be written to the datastore.

The third section of the script defines functions that implement the module. There must be a main function that has the module name. This function will then call all other module functions.
