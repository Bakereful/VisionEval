
# CalculateBaseRoadDvmt Module
### January 6, 2019

This module calculates base year roadway DVMT by vehicle type (light-duty, heavy truck, bus) and the distribution of roadway DVMT by vehicle type to roadway classes (freeway, arterial, other). It also computes factors used for computing heavy truck DVMT and light-duty commercial service vehicle DVMT in future years.

## Model Parameter Estimation

This module has no estimated parameters.

## How the Module Works

This module calculates several values necessary for calculating urbanized area road performance metrics by the CalculateRoadPerformance module as follows:

* *Calculate heavy truck growth factors*: Base year heavy truck DVMT is calculated for the region and heavy truck DVMT on urbanized area roadways is calculated for each marea in the Initialize module. The ratios of these heavy truck DVMT estimates with base year regional and marea population and with base year regional and marea income are calculated and saved to the datastore. These ratios are used to calculate future year heavy truck DVMT using either future year population or future year income. Whether population or income is used as the basis for calculating heavy truck DVMT is determined by the value of HvyTrkDvmtGrowthBasis in the 'region_base_year_dvmt.csv' input file.

* *Calculate commercial service vehicle growth factors*: Base year commercial service vehicle (light-duty) DVMT is calculated for each marea in the Initialize module. The ratios of commercial service DVMT with base year marea household DVMT, population, and income are calculated and saved to the datastore. These ratios are used to calculate future year commercial service DVMT using future year household DVMT, population, or income. Which is used as a basis for calculating commercial service DVMT is determined by the value of ComSvcDvmtGrowthBasis in the 'region_base_year_dvmt.csv' input file.

* *Calculate ratio of urban light-duty vehicle roadway DVMT to urban light-duty vehicle (LDV) travel demand*: The CalculateHouseholdDvmt module in the VEHouseholdTravel package calculates the DVMT of households irrespective of where that travel occurs. Likewise commercial service vehicle travel that is calculated is the travel associated with households and the employment of household workers. For each marea to calculate the ratio of light-duty urban roadway DVMT to light-duty vehicle travel demand of urban area households (household DVMT, commercial service DVMT, and public transit DVMT) is calculated. This calculation uses the base year urban roadway DVMT calculated by the Initialize module, the modeled base year household DVMT, the base year commercial service DVMT calculated from the modeled base year household DVMT and the 2010 estimate of the ratio of commercial service DVMT to household DVMT calculated by the 'LoadDefaultRoadDvmtValues.R' script, and the base year public transit van DVMT calculated by the AssignTransitService module in the VETransportSupply package.

* *Calculate marea urban base year road DVMT by vehicle type (LDV, heavy truck, bus) and road class (freeway, arterial, other)*: Base year urban roadway LDV DVMT and heavy truck DVMT are calculated as described above. Bus DVMT is calculated by the AssignTransitService module. These respective DVMT quantities are split between road classes using the proportional factors calculated by the Initialize module which either uses user inputs in the 'marea_dvmt_split_by_road_class.csv' file or default values calculated from Highway Statistics data by the LoadDefaultRoadDvmtValues.R script where data is not supplied by the user. For light-duty urban road DVMT, the freeway and arterial proportion of DVMT is combined. The CalculateRoadPerformance module splits this into freeway and arterial components based on operating conditions and prices.



## User Inputs
This module has no user input requirements.

## Datasets Used by the Module
The following table documents each dataset that is retrieved from the datastore and used by the module. Each row in the table describes a dataset. All the datasets must be present in the datastore. One or more of these datasets may be entered into the datastore from the user input files. The table names and their meanings are as follows:

NAME - The dataset name.

TABLE - The table in the datastore that the data is retrieved from.

GROUP - The group in the datastore where the table is located. Note that the datastore has a group named 'Global' and groups for every model run year. For example, if the model run years are 2010 and 2050, then the datastore will have a group named '2010' and a group named '2050'. If the value for 'GROUP' is 'Year', then the dataset will exist in each model run year group. If the value for 'GROUP' is 'BaseYear' then the dataset will only exist in the base year group (e.g. '2010'). If the value for 'GROUP' is 'Global' then the dataset will only exist in the 'Global' group.

TYPE - The data type. The framework uses the type to check units and inputs. Refer to the model system design and users guide for information on allowed types.

UNITS - The units that input values need to represent. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example 'MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.

PROHIBIT - Values that are prohibited. Values in the datastore do not meet any of the listed conditions.

ISELEMENTOF - Categorical values that are permitted. Values in the datastore are one or more of the listed values.

|NAME                  |TABLE  |GROUP    |TYPE      |UNITS      |PROHIBIT |ISELEMENTOF                                                                                                                                                                                                        |
|:---------------------|:------|:--------|:---------|:----------|:--------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|HvyTrkDvmtGrowthBasis |Region |Global   |character |ID         |         |Income, Population                                                                                                                                                                                                 |
|StateAbbrLookup       |Region |Global   |character |ID         |         |AL, AK, AZ, AR, CA, CO, CT, DE, FL, GA, HI, ID, IL, IN, IA, KS, KY, LA, ME, MD, MA, MI, MN, MS, MO, MT, NE, NV, NH, NJ, NM, NY, NC, ND, OH, OK, OR, PA, RI, SC, SD, TN, TX, UT, VT, VA, WA, WV, WI, WY, DC, PR, NA |
|HvyTrkDvmt            |Region |Global   |compound  |MI/DAY     |< 0      |                                                                                                                                                                                                                   |
|ComSvcDvmtGrowthBasis |Region |Global   |character |ID         |         |HhDvmt, Income, Population                                                                                                                                                                                         |
|Marea                 |Marea  |Global   |character |ID         |         |                                                                                                                                                                                                                   |
|UzaNameLookup         |Marea  |Global   |character |ID         |         |                                                                                                                                                                                                                   |
|UrbanLdvDvmt          |Marea  |Global   |compound  |MI/DAY     |< 0      |                                                                                                                                                                                                                   |
|UrbanHvyTrkDvmt       |Marea  |Global   |compound  |MI/DAY     |< 0      |                                                                                                                                                                                                                   |
|LdvFwyDvmtProp        |Marea  |Global   |double    |proportion |< 0, > 1 |                                                                                                                                                                                                                   |
|LdvArtDvmtProp        |Marea  |Global   |double    |proportion |< 0, > 1 |                                                                                                                                                                                                                   |
|LdvOthDvmtProp        |Marea  |Global   |double    |proportion |< 0, > 1 |                                                                                                                                                                                                                   |
|HvyTrkFwyDvmtProp     |Marea  |Global   |double    |proportion |< 0, > 1 |                                                                                                                                                                                                                   |
|HvyTrkArtDvmtProp     |Marea  |Global   |double    |proportion |< 0, > 1 |                                                                                                                                                                                                                   |
|HvyTrkOthDvmtProp     |Marea  |Global   |double    |proportion |< 0, > 1 |                                                                                                                                                                                                                   |
|BusFwyDvmtProp        |Marea  |Global   |double    |proportion |< 0, > 1 |                                                                                                                                                                                                                   |
|BusArtDvmtProp        |Marea  |Global   |double    |proportion |< 0, > 1 |                                                                                                                                                                                                                   |
|BusOthDvmtProp        |Marea  |Global   |double    |proportion |< 0, > 1 |                                                                                                                                                                                                                   |
|Marea                 |Marea  |BaseYear |character |ID         |         |                                                                                                                                                                                                                   |
|VanDvmt               |Marea  |BaseYear |compound  |MI/DAY     |NA, < 0  |                                                                                                                                                                                                                   |
|BusDvmt               |Marea  |BaseYear |compound  |MI/DAY     |NA, < 0  |                                                                                                                                                                                                                   |
|RailDvmt              |Marea  |BaseYear |compound  |MI/DAY     |NA, < 0  |                                                                                                                                                                                                                   |
|RuralPop              |Marea  |BaseYear |people    |PRSN       |NA, < 0  |                                                                                                                                                                                                                   |
|TownPop               |Marea  |BaseYear |people    |PRSN       |NA, < 0  |                                                                                                                                                                                                                   |
|UrbanPop              |Marea  |BaseYear |people    |PRSN       |NA, < 0  |                                                                                                                                                                                                                   |
|RuralIncome           |Marea  |BaseYear |currency  |USD        |NA, < 0  |                                                                                                                                                                                                                   |
|TownIncome            |Marea  |BaseYear |currency  |USD        |NA, < 0  |                                                                                                                                                                                                                   |
|UrbanIncome           |Marea  |BaseYear |currency  |USD        |NA, < 0  |                                                                                                                                                                                                                   |
|UrbanHhDvmt           |Marea  |BaseYear |compound  |MI/DAY     |NA, < 0  |                                                                                                                                                                                                                   |
|TownHhDvmt            |Marea  |BaseYear |compound  |MI/DAY     |NA, < 0  |                                                                                                                                                                                                                   |
|RuralHhDvmt           |Marea  |BaseYear |compound  |MI/DAY     |NA, < 0  |                                                                                                                                                                                                                   |

## Datasets Produced by the Module
The following table documents each dataset that is retrieved from the datastore and used by the module. Each row in the table describes a dataset. All the datasets must be present in the datastore. One or more of these datasets may be entered into the datastore from the user input files. The table names and their meanings are as follows:

NAME - The dataset name.

TABLE - The table in the datastore that the data is retrieved from.

GROUP - The group in the datastore where the table is located. Note that the datastore has a group named 'Global' and groups for every model run year. For example, if the model run years are 2010 and 2050, then the datastore will have a group named '2010' and a group named '2050'. If the value for 'GROUP' is 'Year', then the dataset will exist in each model run year. If the value for 'GROUP' is 'BaseYear' then the dataset will only exist in the base year group (e.g. '2010'). If the value for 'GROUP' is 'Global' then the dataset will only exist in the 'Global' group.

TYPE - The data type. The framework uses the type to check units and inputs. Refer to the model system design and users guide for information on allowed types.

UNITS - The units that input values need to represent. Some data types have defined units that are represented as abbreviations or combinations of abbreviations. For example 'MI/HR' means miles per hour. Many of these abbreviations are self evident, but the VisionEval model system design and users guide should be consulted.

PROHIBIT - Values that are prohibited. Values in the datastore do not meet any of the listed conditions.

ISELEMENTOF - Categorical values that are permitted. Values in the datastore are one or more of the listed values.

DESCRIPTION - A description of the data.

|NAME                       |TABLE  |GROUP  |TYPE     |UNITS      |PROHIBIT |ISELEMENTOF |DESCRIPTION                                                                                                                                                                                                                                                                             |
|:--------------------------|:------|:------|:--------|:----------|:--------|:-----------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|HvyTrkDvmtIncomeFactor     |Region |Global |compound |MI/USD     |<= 0     |            |Ratio of Region base year heavy truck DVMT to household income                                                                                                                                                                                                                          |
|HvyTrkDvmtPopulationFactor |Region |Global |compound |MI/PRSN    |<= 0     |            |Ratio of Region base year heavy truck DVMT to population                                                                                                                                                                                                                                |
|HvyTrkUrbanDvmt            |Region |Year   |compound |MI/DAY     |<= 0     |            |Base year Region heavy truck daily vehicle miles of travel in urbanized areas                                                                                                                                                                                                           |
|HvyTrkNonUrbanDvmt         |Region |Year   |compound |MI/DAY     |<= 0     |            |Base year Region heavy truck daily vehicle miles of travel outside of urbanized areas (i.e. in town or rural areas)                                                                                                                                                                     |
|ComSvcDvmtHhDvmtFactor     |Marea  |Global |double   |proportion |<= 0     |            |Ratio of Marea base year commercial service DVMT to household DVMT                                                                                                                                                                                                                      |
|ComSvcDvmtIncomeFactor     |Marea  |Global |compound |MI/USD     |NA, < 0  |            |Ratio of base year commercial service vehicle DVMT to household income                                                                                                                                                                                                                  |
|HvyTrkDvmtIncomeFactor     |Marea  |Global |compound |MI/USD     |NA, < 0  |            |Ratio of base year heavy truck DVMT to household income                                                                                                                                                                                                                                 |
|ComSvcDvmtPopulationFactor |Marea  |Global |compound |MI/PRSN    |NA, < 0  |            |Ratio of base year commercial service vehicle DVMT to population                                                                                                                                                                                                                        |
|HvyTrkDvmtPopulationFactor |Marea  |Global |compound |MI/PRSN    |NA, < 0  |            |Ratio of base year heavy truck DVMT to population                                                                                                                                                                                                                                       |
|LdvRoadDvmtLdvDemandRatio  |Marea  |Global |double   |ratio      |NA, <= 0 |            |Ratio between light-duty vehicle (LDV) daily vehicle miles of travel (DVMT) on urbanized area roadways in the Marea to the total LDV DVMT of households residing in the urbanized area, the commercial service vehicle travel related to household demand, and LDV public transit DVMT. |
|ComSvcUrbanDvmt            |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Commercial service daily vehicle miles of travel associated with Marea urbanized household activity                                                                                                                                                                                     |
|ComSvcTownDvmt             |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Commercial service daily vehicle miles of travel associated with Marea town household activity                                                                                                                                                                                          |
|ComSvcRuralDvmt            |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Commercial service daily vehicle miles of travel associated with Marea rural household activity                                                                                                                                                                                         |
|HvyTrkUrbanDvmt            |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Heavy truck daily vehicle miles of travel on urbanized area roadways in the Marea                                                                                                                                                                                                       |
|LdvFwyArtDvmt              |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeway or arterial roadways                                                                                                                                                                |
|LdvOthDvmt                 |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Light-duty daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways                                                                                                                                                                              |
|HvyTrkFwyDvmt              |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways                                                                                                                                                                                   |
|HvyTrkArtDvmt              |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways                                                                                                                                                                          |
|HvyTrkOthDvmt              |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Heavy truck daily vehicle miles of travel in the urbanized portion of the Marea occurring on other roadways                                                                                                                                                                             |
|BusFwyDvmt                 |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on freeways                                                                                                                                                                                           |
|BusArtDvmt                 |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Bus daily vehicle miles of travel in the urbanized portion of the Marea occurring on arterial roadways                                                                                                                                                                                  |
|BusOthDvmt                 |Marea  |Year   |compound |MI/DAY     |NA, < 0  |            |Bus daily vehicle miles of travel in the urbanized portion of the Marea occuring on other roadways                                                                                                                                                                                      |
